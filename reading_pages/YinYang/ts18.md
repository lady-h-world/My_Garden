### Prophet Template

Prophet doesn't have a cool design architecture as Silverkite, so Lady H. made one!

<p align="center">
<img src="https://github.com/lady-h-world/My_Garden/blob/main/images/lady_heart_manga/prophet_formula.png" width="490" height="439" />
</p>

And, all the secrets are hidden in this formula!

Instead of considering the data's temporal dependency like (S)ARIMA, Prophet model frames the forecasting problem as a curve-fitting exercise by using a trend function `g(t)`, a seasonality function `s(t)`, a holiday function `h(t)` and the error term `Îµt`. The benefit of Prophet model is the flexibility that users can adjust model parameters with different assumptions about the trend, the seasonality or the holidays. Prophet is a convenient time series forecasting tool with insightful visualization, to learn more details check [Prophet paper][1]. Now let's see how can we use Prophet template in Greykite!

#### Config

The difference mainly lies in the configuration settings.
* `seasonality_mode` is a unique parameter in Prophet template. It supports "additive" or "multiplilicative" modes. Mode "additive" is used when you assume the seasonality is constant over the time, Prophet will add seasoanlity to trend in the formula. Mode "multiplicative" is used when you assume the seasoanlity is time varying, and Prophet will multiply the seasonality with the trend.
* `add_seasonality_dict` is also Prophet unique. You can define different cycles for seasonality such as "monthly", "quarterly", etc. In each cycle, you can define the period and fourier order. Fourier allows faster fitting in changing seasonality cycles, but could also lead to overfitting. N Fourier terms corresponds to 2N variables used for modeling the cycle. 
* In `events`, in prophet you don't need `holidays_to_model_separately` tospecify any event independently, Prophet will handle each event listed in `holiday_lookup_countries` fo you. Besides, in Prophet template, `holiday_pre_num_days` and `holiday_post_num_days` have to be list format. In Silver kite, these 2 variables cna be either int or list format.

<p align="left">
<img src="https://github.com/lady-h-world/My_Garden/blob/main/images/Garden_Totem_images/forecasting/prophet_config1.png" width="455" height="384" />
</p>

Configuration of `custom`, `model_components`, `evaluation_period` and `metadata` can be the same as Silverkite, since they are not dependent on the algorithm of Silverkite or Prophet, but more dependent on Greykite framework.

<p align="left">
<img src="https://github.com/lady-h-world/My_Garden/blob/main/images/Garden_Totem_images/forecasting/prophet_config2.png" width="650" height="447" />
</p>

Finally, we put all the config parameters in `ForecastConfig`. Comparing with Silverkite, Prophet has `coverage` parameter to generate the lower and upper bounds for forecasted value. The idea is same as the confidence interval of model forecasting that instead of getting a specific forecasting value, you can get a value range and there's higher chance for the real value to drop into this range.

<p align="left">
<img src="https://github.com/lady-h-world/My_Garden/blob/main/images/Garden_Totem_images/forecasting/prophet_config3.png" width="482" height="134" />
</p>





[1]:https://peerj.com/preprints/3190.pdf

